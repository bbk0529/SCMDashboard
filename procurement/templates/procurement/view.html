{%load static %}
<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<head>
    {% include "../subtemplate/head.html" %}
</head>
<body>




    <div class="content mt-3">
    <!-- <div class="animated fadeIn"> -->
            <div><img src="{% static 'images/festologo.jpg' %}"></div>
            <div class="row" >



              <div class="col-lg-8"  id="result">
                      <div class="card">
                        <div class="card-header">
                          <strong>Inquiry</strong> View
                        </div>


                        <div class="card-body card-block">
                                  <!-- <form action="" method="post" enctype="multipart/form-data" class="form-horizontal"> -->


                                        <div class="row form-group">
                                          <div class="col-3"><label for="text-input" class=" form-control-label"  >SA No.</label></div>
                                          <div class="col-4">
                                            <input type="text" id="text-input" name="text-input" value="{{ Assay.SA_No}}" disabled="True" placeholder="Assay_No" class="form-control">
                                          </div>
                                          <!-- <div class="col-6 col-md-3"><input type="text" id="text-input" name="text-input" value="{{ Assay.SA_No}}" placeholder="Text" class="form-control"></div> -->
                                            <!-- <div class="col-3 col-md-3"> -->
                                              <div class="col-5">
                                              <!-- <form action="/scm" method="get"> -->
                                                  <input list="SA_No" name="SA_No" id="assayNo">
                                                  <datalist id="SA_No">
                                                    {% for assay in assayList %}
                                                        <option value=" {{ assay.SA_No }}">
                                                    {% endfor %}
                                                  </datalist>
                                                  <button id="check" > Query </button>
                                                  <!-- <input type="submit" value="Query"> -->

                                              <!-- </form> -->

                                            </div>
                                              <!-- <input type="text" id="text-input" name="text-input" value="{{ Assay.SA_No}}" placeholder="Text" class="form-control"> -->
                                            <!-- </div> -->




                                        </div>
                        </div> <!-- card body -->
                      </div> <!-- card -->
              </div>
              <div class="col-lg-4">
                <div class="card">
                  <div class="card-header">
                    <strong>Assay List </strong> View
                  </div>
                          <div class="card-body card-block">
                            <table id="bootstrap-data-table-export" class="table table-striped table-bordered">
                                <thead>
                                  <tr>
                                    <th>AssayNo</th>
                                    <th>Type</th>
                                  </tr>
                                </thead>
                                <tbody>
                                  {% for assay in assayList %}
                                    <tr>
                                      <td id="{{assay.SA_No}}">   {{ assay.SA_No }} </td>
                                      <td <td id="{{assay.SA_No}}">  {{ assay.Type }} </td>
                                    </tr>
                                  {% endfor %}
                                </tbody>
                                <tfoot>
                                  <tr>
                                    <th>AssayNo</th>
                                    <th>Type</th>
                                  </tr>
                            </tfoot>
                            </table>
                </div> <!--card body -->
                </div> <!-- card-->
              </div> <!-- card lg-6 -->

          </div> <!-- row -->
    <!-- </div><!-- .animated -->
</div><!-- .content -->
</div> <!-- /#right-panel -->




    <script src="{% static 'assets/js/vendor/jquery-2.1.4.min.js' %}"></script>
    <script src="{% static 'assets/js/popper.min.js' %}"></script>
    <script src="{% static 'assets/js/plugins.js' %}"></script>
    <script src="{% static 'assets/js/main.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/datatables.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/dataTables.bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/dataTables.buttons.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/buttons.bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/jszip.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/pdfmake.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/vfs_fonts.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/buttons.html5.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/buttons.print.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/buttons.colVis.min.js' %}"></script>
    <script src="{% static 'assets/js/lib/data-table/datatables-init.js' %}"></script>

</body>
</html>

<script>
  $(document).ready(function(){
      console.log("java script called");

  // $("#bootstrap-data-table-export").click("td", function(){ //the event happening, table <td> clicked
      $("#bootstrap-data-table-export").on('click', 'td', function(){ //the event happening, table <td> clicked
          let assayNo=$(this).attr('id')
          console.log(assayNo)
          // let assayNo=$(this).attr('id');
          $.ajax({
              url : "assayQuery",
              type : "get",
              data: {
                  'SA_No' : assayNo
              },
              async: false,
              success : function(data) {
                  console.log("successfully communicated with Server");
                  // console.log(data);
                  $("#result").html(
                    ""
                  );
                  $("#result").html(
                    data
                  );
              }
          }) //end of $.ajax
          console.log(assayNo);
      }) // end of 'td' click
      $('#check').click(function(){
        console.log("clicked//")
        var assayNo=$("#assayNo").val()
        console.log(assayNo);
        $.ajax({
            url : "assayQuery",
            type : "get",
            data: {
                'SA_No' : assayNo
            },
            // async: false,
            success : function(data) {
                console.log("successfully communicated with Server");
                // console.log(data);
                $("#result").html(
                  ""
                );
                $("#result").html(
                  data
                );
            }
        }) //end of $.ajax
      }); //end of #check click




  });
</script>
